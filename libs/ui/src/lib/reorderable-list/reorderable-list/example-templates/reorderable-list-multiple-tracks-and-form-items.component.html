<cvi-ng-track horizontalAlignment="right">
  <cvi-ng-button (click)="addNewItem()" [appearance]="'text'">
    <cvi-ng-labeled-icon
      [alignment]="'center'"
      [iconPosition]="'before'"
      [name]="'add'"
    >
      Add item
    </cvi-ng-labeled-icon>
  </cvi-ng-button>
</cvi-ng-track>

<cvi-ng-reorderable-list [items]="items">
  <ng-template let-item>
    <cvi-ng-reorderable-list-item
      (removeStepEvent)="removeStep(item)"
      (swapStepsEvent)="swapSteps($event)"
      [dataAttribute]="'reorderable-list-item-' + getOrderNr(item)"
      [index]="getIndex(item)"
      [setAsNextStepButtonVisible]="isNotLastItem(item)"
      [setAsPreviousStepButtonVisible]="isNotFirstItem(item)"
    >
      <!-- Additional track for gaps between containing elements -->
      <cvi-ng-track gap="8" flexDirection="vertical">
        <!-- 1st track-->
        <cvi-ng-track gap="4"
                        gridRows="1"
                        layout="grid">
          <cvi-ng-form-item [htmlId]="'track-1-field-1-step-' + getOrderNr(item) + '-form-item'"
                              [label]="'Track 1 form item 1 label'">
            <cvi-ng-input [(ngModel)]="item.track1Field1"
                            [dataAttribute]="'step-' + getOrderNr(item) + '-name'"
                            [htmlId]="'track-1-field-1-step-' + getOrderNr(item) + '-form-item'">
            </cvi-ng-input>
          </cvi-ng-form-item>
          <cvi-ng-form-item [htmlId]="'track-1-field-2-step-' + getOrderNr(item) + '-form-item'"
                              [label]="'Track 1 form item 2 label'">
            <cvi-ng-input [(ngModel)]="item.track1Field2"
                            [dataAttribute]="'step-' + getOrderNr(item) + '-name'"
                            [htmlId]="'track-1-field-2-step-' + getOrderNr(item) + '-form-item'">
            </cvi-ng-input>
          </cvi-ng-form-item>
          <cvi-ng-form-item [htmlId]="'track-1-field-3-step-' + getOrderNr(item) + '-form-item'"
                              [label]="'Track 1 form item 3 label'">
            <cvi-ng-input [(ngModel)]="item.track1Field3"
                            [dataAttribute]="'step-' + getOrderNr(item) + '-name'"
                            [htmlId]="'track-1-field-3-step-' + getOrderNr(item) + '-form-item'">
            </cvi-ng-input>
          </cvi-ng-form-item>
        </cvi-ng-track>

        <!-- 2nd track -->
        <cvi-ng-track gap="4"
                        gridRows="1"
                        layout="grid">
          <cvi-ng-form-item [htmlId]="'track-2-field-1-step-' + getOrderNr(item) + '-form-item'"
                              [label]="'Track 2 form item 1 label'">
            <cvi-ng-input [(ngModel)]="item.track2Field1"
                            [dataAttribute]="'step-' + getOrderNr(item) + '-name'"
                            [htmlId]="'track-2-field-1-step-' + getOrderNr(item) + '-form-item'">
            </cvi-ng-input>
          </cvi-ng-form-item>
          <cvi-ng-form-item [htmlId]="'track-2-field-2-step-' + getOrderNr(item) + '-form-item'"
                              [label]="'Track 2 form item 2 label'">
            <cvi-ng-input [(ngModel)]="item.track2Field2"
                            [dataAttribute]="'step-' + getOrderNr(item) + '-name'"
                            [htmlId]="'track-2-field-2-step-' + getOrderNr(item) + '-form-item'">
            </cvi-ng-input>
          </cvi-ng-form-item>
        </cvi-ng-track>

        <cvi-ng-form-item [htmlId]="'single-field-step-' + getOrderNr(item) + '-form-item'"
                            [label]="'Single form item without a track label'">
          <cvi-ng-textarea [(ngModel)]="item.singleField"
                             [htmlId]="'single-field-step-' + getOrderNr(item) + '-form-item'"
                             maxChars="100"
                             ngDefaultControl cviNgCharacterCounter>
          </cvi-ng-textarea>
        </cvi-ng-form-item>

      </cvi-ng-track>
    </cvi-ng-reorderable-list-item>
  </ng-template>
</cvi-ng-reorderable-list>

<div style="padding: 16px">
  <pre>Items:</pre>
  <pre>{{ items | json }}</pre>
</div>
