<div class="cvi-tabs__list" role="tablist" *ngIf="currentWindowWidth >= 992">
  <button
    *ngFor="let tab of allTabs; let i = index"
    dataAttribute="tab-button-{{ i }}"
    [ngClass]="{ active: isTabSelected(i), underlined: isTabSelected(i) }"
    (click)="makeActive(i)"
    type="button"
    #tabButton
    id="{{ baseId }}-tab-{{ i }}"
    [attr.aria-selected]="isTabSelected(i)"
    role="tab"
    [attr.tabindex]="isTabSelected(i) ? null : '-1'"
    (keyup.arrowleft)="makeActivePrev($event)"
    (keyup.arrowright)="makeActiveNext($event)"
    [attr.aria-controls]="baseId + '-tabpanel-' + i"
    class="cvi-tabs__tab-btn"
  >
    {{ tab.title }}
  </button>
</div>
<div class="cvi-tabs__list" role="tablist" *ngIf="currentWindowWidth < 821">
  <button
    class="cvi-tabs__mobile-button"
    type="button"
    id="dropdownMenuButton"
    data-mdb-toggle="dropdown"
    aria-expanded="false"
    (click)="handleArrowButtonClick($event)"
  >
    {{ getActiveTabTitle() }}
    <cvi-ng-icon
      [class]="'cvi-tabs__icon'"
      [name]="isOpen ? 'arrow_up_alt' : 'arrow_down_alt'"
      [svgClass]="'cvi-tabs__arrow-icon'"
    >
    </cvi-ng-icon>
  </button>
</div>
<div
  *ngIf="isOpen"
  dataAttribute="tabs-popup"
  class="cvi-tabs__dropdown-popup"
  #popup
>
  <div class="cvi-tabs__dropdown">
    <ul
      role="listbox"
      class="cvi-tabs__dropdown-container"
      [scrollableEl]="popup"
      (closed)="close()"
    >
      <li
        *ngFor="let tab of allTabs; let i = index"
        class="cvi-tabs__dropdown-item"
        dataAttribute="tab-button-{{ i }}"
        tabindex="0"
        (click)="makeActive(i)"
        id="{{ baseId }}-tab-{{ i }}"
        [attr.aria-selected]="isTabSelected(i)"
        role="tab"
        (keyup.arrowleft)="makeActivePrev($event)"
        (keyup.arrowright)="makeActiveNext($event)"
        [attr.aria-controls]="baseId + '-tabpanel-' + i"
      >
        {{ tab.title }}
      </li>
    </ul>
  </div>
</div>
<div
  dataAttribute="tab-content"
  class="cvi-tabs__tab-content"
  role="tabpanel"
  [attr.aria-labelledby]="baseId + '-tab-' + activeIndex"
  tabindex="0"
  [attr.id]="baseId + '-tabpanel-' + activeIndex"
>
  <ng-container *ngTemplateOutlet="getActiveTabContent()"></ng-container>
</div>
